| Component Name | Responsibility | Interfaces (key endpoints or methods) | Depends On (other modules) | Technologies (frameworks, DBs, patterns) |
|---|---|---|---|---|
| Web UI (Clients SPA) | User-facing SPA for Catalog, Dealers, Quotes, Orders, Deliveries; hosted on Tomcat | Data module: catalogGet/Create/Save/Delete, catalogFindSku; dealersGet, dealerCreate/Save/Delete; quotesGet, quoteCreate/Save/Delete, quoteGetById; ordersGet, orderCreate, orderCreateFromQuote, orderSave/Delete, orderFindById; deliveriesGet, deliveryCreateFromOrder, deliverySave/Delete, deliveryFindById | OrderService APIs; Tomcat app server | WinJS, HTML5/JS, DateJS, Google Places API, WAR on Tomcat 7, Gradle |
| OrderService - Catalog API | CRUD for catalog items | GET /catalog, GET /catalog/{sku}, POST /catalog, PUT /catalog/{sku}, DELETE /catalog/{sku} | RepositoryFactory; CatalogItemsRepository (Mongo or memory); MongoDB Database; AppInsightsFilter; SimpleCORSFilter | Java 8, Spring Boot, Spring MVC, Spring Data MongoDB, REST/JSON, Gradle |
| OrderService - Dealer API | CRUD for dealers (APM demo load on GET) | GET /dealers, GET /dealers/{name}, POST /dealers, PUT /dealers/{name}, DELETE /dealers/{name} | RepositoryFactory; DealersRepository (Mongo or memory); MongoDB Database; AppInsightsFilter; SimpleCORSFilter | Java 8, Spring Boot, Spring MVC, Spring Data MongoDB, REST/JSON; intentional heavy loop for APM |
| OrderService - Quote API | Quote lifecycle and search; upserts Dealer if missing | GET /quotes/{id}, GET /quotes?name={filter}, POST /quotes, PUT /quotes/{id}, DELETE /quotes/{id} | RepositoryFactory; QuoteRepository (Mongo or memory); DealersRepository (cross-repo upsert); MongoDB Database; AppInsightsFilter; SimpleCORSFilter | Java 8, Spring Boot, Spring MVC, Spring Data MongoDB, REST/JSON |
| OrderService - Order API | Order lifecycle, status updates, events; 1:1 with Quote | GET /orders/{id}, GET /orders?dealer={name}&status={OrderStatus}, POST /orders?fromQuote={quoteId}, POST /orders/{id}/events, PUT /orders/{id}, PUT /orders/{id}/status, DELETE /orders/{id} | RepositoryFactory; OrderRepository; QuoteRepository (validate existence); MongoDB Database; AppInsightsFilter; SimpleCORSFilter | Java 8, Spring Boot, Spring MVC, Spring Data MongoDB, REST/JSON; event append on status change |
| OrderService - Shipment API | Shipment records and events; 1:1 with Order; deliveries aggregation | GET /shipments?status={OrderStatus}, GET /shipments/deliveries, GET /shipments/{orderId}, POST /shipments, PUT /shipments/{orderId}, POST /shipments/{orderId}/events, DELETE /shipments/{orderId} | RepositoryFactory; ShipmentRepository; OrderRepository (validate existence/filter by status); MongoDB Database; AppInsightsFilter; SimpleCORSFilter | Java 8, Spring Boot, Spring MVC, Spring Data MongoDB, REST/JSON; aggregate DTO for deliveries |
| OrderService - Ping/Health | Liveness and build/config info | HEAD /ping, GET /ping | buildinfo.properties; AppInsightsFilter; SimpleCORSFilter | Spring Boot, REST/JSON, Gradle build info injection |
| RepositoryFactory & Repository Abstractions | Storage abstraction and service locator; switchable backends (mongodb, memory) | Repos: CatalogItemsRepository, DealersRepository, QuoteRepository, OrderRepository, ShipmentRepository (create/update/upsert, get/getById, list/query, remove) | MongoDB Repository Implementation; In-memory Repository Implementation | Repository pattern; Service locator; Java |
| MongoDB Repository Implementation | Persist domain models; enforce cross-repo invariants; indexing | Operations via MongoTemplate/MongoOperationsWithRetry; models: catalog, dealers, quotes, orders, shipments; cross-repo: Quote upserts Dealer, Order/Shipment uniqueness | MongoDB Database; MongoOperationsWithRetry | Spring Data MongoDB, MongoTemplate, indexed collections; cross-repo coordination |
| In-memory Repository Implementation | In-memory data store for tests/dev; sample data | Same repo interfaces (create/get/list/update/remove); auto-generate IDs; case-insensitive lookups | RepositoryFactory (memory mode) | Java collections; test double pattern |
| MongoOperationsWithRetry | Telemetry-wrapped Mongo operations with single retry on socket timeouts | dropCollection, findAll, findOne, exists, find, findAndRemove, insert, save | Application Insights Telemetry; Spring MongoOperations; MongoDB Database | Retry pattern; dependency telemetry (RemoteDependencyTelemetry); Spring Data Mongo |
| AppInsightsFilter (OrderService) | Request/exception telemetry | Servlet Filter for HTTP requests/exceptions | Application Insights; OrderService controllers | Azure Application Insights SDK; servlet filter |
| SimpleCORSFilter (OrderService) | Permissive CORS for browser clients | Adds Access-Control-Allow-* headers | OrderService controllers | Servlet filter; CORS |
| IntegrationService - Orders Ingestion Task | Poll orders queue; create Quote → Order → Shipment; delete processed messages | Scheduled every 30s; uses MrpConnectService: POST /quotes, POST /orders?fromQuote={id}, POST /shipments; QueueService: dequeue/delete from "orders" | Azure Storage Queues ("orders"); OrderService APIs; MrpConnectService; QueueFactory/QueueService | Spring Boot scheduling; Azure Storage SDK (queues); REST client; at-least-once processing (no idempotency) |
| IntegrationService - Inventory Export Task | Export catalog to product queue | Scheduled every 30s; GET /catalog; enqueue ProductMessage to "product" | OrderService Catalog API; Azure Storage Queues ("product"); MrpConnectService; QueueFactory/QueueService | Spring Boot scheduling; Azure Storage SDK; REST client |
| IntegrationService - QueueFactory/QueueService | Manage CloudQueue instances; queue I/O | getQueue(name), enqueue, dequeue, delete; CloudQueue caching | Azure Storage SDK | azure-storage 2.0.0; ConcurrentHashMap cache |
| IntegrationService - MrpConnectService | HTTP client for OrderService | postQuote, postOrderFromQuote, postShipment, getCatalog (base URL mrp.endpoint) | OrderService APIs | Spring Boot; REST/JSON client; configurable endpoint |
| MongoDB Database | Primary data store for OrderService | Collections: catalog, dealers, quotes, orders, shipments; indexes on ids, names/status where noted | OrderService Mongo Repos | MongoDB (ordering, orderingtest); seeded via MongoRecords.js |
| Azure Storage Queues | Asynchronous integration channel | Queue names: orders (OrderMessage JSON), product (ProductMessage JSON) | IntegrationService tasks | Azure Storage Queues; at-least-once semantics |