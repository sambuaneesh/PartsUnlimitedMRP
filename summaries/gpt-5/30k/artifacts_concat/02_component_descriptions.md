| Component Name | Responsibility | Interfaces (key endpoints or methods) | Depends On (other modules) | Technologies (frameworks, DBs, patterns) |
|---|---|---|---|---|
| Web Client (MRP SPA) | User-facing UI for Catalog, Dealers, Quotes, Orders, Deliveries, Events | Serves at /mrp (Tomcat 9080) and calls Ordering Service via baseAddress http://<host>:8080<br>Data.* methods: catalogGet/Create/Save/Delete, dealersGet/Create/Save/Delete, quotesGet/Create/Save/Delete, orderCreateFromQuote/Save/Delete/Get, deliveriesGet/CreateFromOrder/Save/Delete, order events popup workflows | Ordering Service (REST API); Google Places (Autocomplete); DateJS | WinJS SPA, HTML/CSS/JS, Tomcat 7, two-way binding, ContentDialog-based modals |
| Ordering Service (REST API) | Core domain APIs for catalog, dealers, quotes, orders, shipments; persistence; health; telemetry; CORS | /catalog: GET, GET /{sku}, POST, PUT /{sku}, DELETE /{sku}<br>/dealers: GET, GET /{name}, POST, PUT /{name}, DELETE /{name}<br>/quotes: GET /{id}, GET ?name=, POST, PUT /{id}, DELETE /{id}<br>/orders: GET /{id}, GET ?dealer=&status=, POST ?fromQuote=, PUT /{id}, PUT /{id}/status, POST /{id}/events, DELETE /{id}<br>/shipments: GET, GET ?status=, GET /{orderId}, POST, PUT /{orderId}, POST /{orderId}/events, DELETE /{orderId}<br>/ping: GET, HEAD | Ordering Database (MongoDB); Observability (Application Insights) | Java 8, Spring Boot/MVC, Spring Data MongoDB, Repository pattern (memory/mongo), CORS filter, AppInsights filter, Mongo retry wrapper |
| Integration Service (Queue Bridge) | Processes website orders from queue into MRP; publishes product inventory to website queue; scheduled polling | Scheduled tasks (every 30s):<br>- Consume orders queue: POST /quotes -> POST /orders?fromQuote -> POST /shipments<br>- Publish catalog to product queue: GET /catalog -> enqueue ProductMessage<br>Queues: orders (consume), product (publish) | Ordering Service (REST API); Messaging (Azure Storage Queues) | Java 8, Spring Boot (scheduling), Azure Storage SDK 2.x, Jackson, HTTP client |
| Ordering Database (MongoDB) | Persistent storage for catalog, dealers, quotes, orders, shipments | MongoDB wire protocol 27017 (Docker also exposes 28017 REST); Collections: catalog, dealers, quotes, orders, shipments; Seed via MongoRecords.js | Ordering Service | MongoDB, Spring Data MongoTemplate, indexed fields (skuNumber, name, quoteId, orderId, status), seeded data |
| Messaging (Azure Storage Queues) | Asynchronous integration channel between website and MRP | Queues: orders (OrderMessage JSON), product (ProductMessage JSON); message visibility timeout ~300s | Integration Service; External Website (producer/consumer) | Azure Storage Queues |
| Observability (Application Insights) | Request and dependency telemetry for Ordering Service and Mongo operations | AppInsightsFilter (HTTP request/exception telemetry); MongoOperationsWithRetry (RemoteDependencyTelemetry per Mongo op); TelemetryClient (instrumentationKey via config) | Ordering Service | Azure Application Insights SDK, servlet filters, dependency telemetry patterns |
| Docker Deployment Assets | Containerized runtime for DB, Ordering Service, and Web; startup orchestration | Scripts: BuildAndRun.sh, StopAndRemove.sh; Images: db (mongo + seed), order (ordering-service + run.sh wait-for-mongo), web (Tomcat + mrp.war); Ports: 27017/28017, 8080, 80->web:8080 | Web Client (MRP SPA); Ordering Service; Ordering Database | Docker, openjdk:8-jre, tomcat:7-jre8, mongo, shell scripts |
| Azure ARM Templates | Provision VMs, NSGs, and extensions for MRP stack; optional Jenkins/Chef/Puppet infra | Parameters: admin creds, DNS label, ports; NSG rules (22, 8080, 9080); Extensions: CustomScriptForLinux, VMAccess, DockerExtension | Chef Cookbook; Puppet Module; Cloud infra | Azure Resource Manager templates, Ubuntu 16.04/14.04, NSG, VNet, CustomScript |
| Chef Cookbook (MRP) | Configure Java, MongoDB, Tomcat; deploy WAR/JAR; seed DB; manage service lifecycle | default.rb: install OpenJDK 8, MongoDB, Tomcat7; seed MongoRecords.js; set Tomcat port; deploy mrp.war; download and run ordering-service JAR | Azure ARM-provisioned VM (or similar host); Ordering Service artifact; Web Client artifact; Ordering Database | Chef, Ruby, Shell, apt packages |
| Puppet Module (MRP) | Configure Java, MongoDB, Tomcat; deploy artifacts; manage ordering-service lifecycle | Classes: configuremongodb, configurejava, createuserandgroup, configuretomcat (port 9080, manager users), deploywar, orderingservice (download/run JAR) | Azure ARM-provisioned VM (or similar host); Ordering Service artifact; Web Client artifact; Ordering Database | Puppet, manifests, Exec/File/Service resources |