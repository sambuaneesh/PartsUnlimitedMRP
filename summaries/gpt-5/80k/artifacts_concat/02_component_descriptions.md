| Component Name | Responsibility | Interfaces (key endpoints or methods) | Depends On (other modules) | Technologies (frameworks, DBs, patterns) |
|---|---|---|---|---|
| Web Client (Clients/Web) | Human-facing SPA to manage catalog, dealers, quotes, orders, deliveries | Calls OrderService: /catalog, /dealers, /quotes, /orders, /orders/{id}/events, /orders/{id}/status, /shipments, /shipments/deliveries | OrderService; (Implied) Address autocomplete API; Tomcat host | WinJS SPA, HTML/JS/CSS, AJAX, Tomcat 7 |
| OrderService (Backend API) | Core MRP domain service (catalog, dealers, quotes, orders, shipments) + health | Catalog: GET/POST/PUT/DELETE /catalog[/ {sku}]; Dealers: GET/POST/PUT/DELETE /dealers[/ {name}]; Quotes: GET /quotes/{id}, GET /quotes?name=, POST/PUT/DELETE /quotes[/ {id}]; Orders: GET /orders/{id}, GET /orders?dealer=&status=, POST /orders?fromQuote=, POST /orders/{id}/events, PUT /orders/{id}, PUT /orders/{id}/status, DELETE /orders/{id}; Shipments: GET /shipments, GET /shipments?status=, GET /shipments/{orderId}, POST /shipments, PUT /shipments/{orderId}, POST /shipments/{orderId}/events, DELETE /shipments/{orderId}; Health: GET/HEAD /ping | MongoDB; Application Insights; Web Client; IntegrationService | Java 8, Spring Boot/MVC, Spring Data MongoDB, Gradle, SLF4J, Application Insights, CORS filter, Repository pattern, MongoOperations retry/telemetry decorator |
| Repository Layer (OrderService) | Persistence abstraction (memory vs Mongo), telemetry + retry | Repos: CatalogItemsRepository, DealersRepository, QuoteRepository, OrderRepository, ShipmentRepository (CRUD, search, create-from-quote, add events); RepositoryFactory(storageKind) | MongoDB (MongoTemplate); OrderService controllers | Spring Data Mongo, In-memory mocks, Retry decorator (SocketTimeout retry), App Insights dependency telemetry |
| MongoDB (ordering DB) | Primary data store for OrderService | Collections: catalog, dealers, quotes, orders, shipments (JSON docs as per seed scripts) | OrderService | MongoDB server, Docker image, Seed scripts (MongoRecords.js) |
| IntegrationService | Bridge between external website and MRP via Azure Queues; scheduled ingest/publish | Schedules (30s): Ingest Orders: dequeue "orders" → POST /quotes, POST /orders?fromQuote=, POST /shipments; Publish Inventory: GET /catalog → enqueue "product"; Config: mrp.endpoint, azure.storage.* | OrderService; Azure Storage Queues | Java 8, Spring Boot (scheduling), Spring Web (RestTemplate), Azure Storage SDK, Jackson, SLF4J/logback |
| MrpConnectService (IntegrationService) | REST client wrapper to OrderService | createQuote(payload), createOrderFromQuote(quoteId), createShipment(payload), getCatalog() | OrderService | Spring RestTemplate, Jackson |
| QueueService<T> and QueueFactory (IntegrationService) | Typed Azure queue access, JSON (de)serialization, queue caching | enqueue(T), dequeue(): QueueResponse<T>, delete(message); QueueFactory.getQueue(name) | Azure Storage Queues | Azure Storage SDK, Jackson, ConcurrentHashMap cache |
| Azure Storage Queues | Asynchronous integration boundary with external website | Queues: "orders" (inbound), "product" (outbound); Visibility timeout configured | IntegrationService; External Website | Azure Storage Queues (PaaS) |
| Docker (deploy/docker) | Containerized runtime for DB, OrderService, Web Client; build/run automation | Dockerfiles (db, order, web), BuildAndRun.sh, StopAndRemove.sh; Exposed ports: 27017/28017, 8080, 80→8080 | MongoDB; OrderService; Web Client | Docker, Bash scripts |
| VM Deployment Scripts | Provision and deploy on VMs; configure ports, seed DB | install_mrp_dependencies.sh, deploy_mrp_app.sh, Install-Build-Dependencies.sh; SSH-MRP-Artifacts.ps1 | OrderService JAR; Tomcat; MongoDB | Bash, PowerShell, apt (Ubuntu), background services |
| Azure ARM/Azure Stack Templates | IaC to provision VMs, NSGs, bootstrap installs | Templates for Jenkins/Chef/Puppet VMs, MRP base VM; CustomScriptExtension | VM scripts; Azure platform | ARM templates, Azure Stack, NSG rules (22/9080/8080) |
| Configuration Management (Chef/Puppet/Ansible) | Automated provisioning/configuration and deployment | Chef cookbook (default.rb), Puppet manifest (init.pp), Ansible (labs) | VMs; OrderService; Tomcat; MongoDB | Chef, Puppet, Ansible |
| CI (Travis CI) | Continuous integration build and test | .travis.yml builds IntegrationService JAR, OrderService JAR (tests), Clients WAR (Gradle) | GitHub repo; Gradle projects | Travis CI, Gradle, JDK 8 |
| Observability (Application Insights) | End-to-end telemetry for requests, dependencies, exceptions | AppInsightsFilter (request), Mongo dependency telemetry, TelemetryClient, ApplicationInsights.xml | OrderService; Repository Layer | Azure Application Insights SDK, Servlet Filter, Dependency telemetry |