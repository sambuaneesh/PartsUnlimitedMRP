| Component Name | Responsibility | Interfaces (key endpoints or methods) | Depends On (other modules) | Technologies (frameworks, DBs, patterns) |
|---|---|---|---|---|
| Clients (Web SPA) | Human-facing UI to browse/manage dealers, quotes, orders, deliveries/shipments, and catalog | Data service methods: Dealers (dealersGet, dealerCreate, dealerSave, dealerDelete); Quotes (quotesGet(filter), quoteCreate, quoteSave, quoteDelete, quoteGetById); Orders (ordersGet(filter), orderCreateFromQuote, orderCreate, orderSave, orderDelete, orderGetById, orderFindById); Deliveries (deliveriesGet, deliveryCreateFromOrder, deliverySave, deliveryDelete, deliveryFindById); Catalog (catalogGet, catalogFindSku, catalogSave, catalogCreate). Config: serverconfig.js baseAddress. UI popups: Extras, OrderEvents. | OrderService (HTTP/JSON); Shared UI utilities (EditTools, dialogs, address autocomplete) | WinJS SPA (Binding, Navigation, ListView); HTML/CSS/JS; Tomcat 7 WAR (mrp.war); CORS-enabled backend; Port defaults: 8080/9080 (VM), 80→8080 (Docker) |
| OrderService (Spring Boot REST API) | Core MRP domain APIs for catalog, dealers, quotes, orders, shipments; health; telemetry and persistence | REST endpoints: /catalog (GET list, GET /{sku}, POST, PUT /{sku}, DELETE /{sku}); /dealers (GET list, GET /{name}, POST, PUT /{name}, DELETE /{name}); /quotes (GET /{id}, GET ?name=, POST, PUT /{id}, DELETE /{id}); /orders (GET /{id}, GET ?dealer=&status=, POST ?fromQuote=, PUT /{id}, PUT /{id}/status, POST /{id}/events, DELETE /{id}); /shipments (GET, GET ?status=, GET /deliveries, GET /{orderId}, POST, PUT /{orderId}, POST /{orderId}/events, DELETE /{orderId}); /ping (HEAD/GET). | MongoDB (ordering DB); Application Insights (telemetry) | Java 8; Spring Boot/MVC; Spring Data Mongo (MongoTemplate); Gradle; WAR/JAR (ServletInitializer); Open CORS; Repository pattern; MongoOperationsWithRetry (retry + dependency telemetry); AppInsightsFilter (request/exception telemetry); Idempotency (order-from-quote); Config via properties/env (MONGO_PORT) |
| IntegrationService (Spring Boot worker) | Asynchronous bridge to external website via Azure Storage Queues; ingests orders; publishes inventory | Scheduled jobs (every 30s): Ingest “orders” queue → create Quote (POST /quotes), Order (POST /orders?fromQuote), Shipment (POST /shipments); Publish inventory → GET /catalog → enqueue to “product”. Services: MrpConnectService (REST to OrderService), QueueService<T> (enqueue/dequeue with visibility timeout). Queues: orders (inbound), product (outbound). | OrderService (HTTP/JSON); Azure Storage Queues | Java 8; Spring Boot 1.2.2 (@EnableScheduling); RestTemplate; Jackson; Azure Storage SDK 2.x (queues); SLF4J/logback; Patterns: polling, eventual consistency, poison message handling, idempotency via OrderService |
| MongoDB (ordering DB) | Persistent storage for catalog, dealers, quotes, orders, shipments | Collections: catalog (skuNumber, description, price, inventory, leadTime); dealers (name, contact, address, email, phone); quotes (quoteId, customer/dealer, items, totals); orders (orderId, quoteId, orderDate, status, events); shipments (orderId, deliveryAddress, contacts, events). Indexed keys: skuNumber, name, quoteId, orderId, status. | — | MongoDB; Accessed via Spring Data Mongo; Seed scripts (MongoRecords.js); Patterns: collections per aggregate, unique constraints; Retry/telemetry via MongoOperationsWithRetry |
| Azure Storage Queues | Async integration channel between website and MRP | Queues: orders (website → IntegrationService), product (IntegrationService → website). Operations: enqueue/dequeue with visibility timeout (azure.storage.queue.message); Message schemas: OrderMessage (+OrderItem), ProductMessage (+ProductItem). | — | Azure Storage Queues; Connection via connection string; JSON serialization (Jackson); Patterns: producer-consumer, at-least-once delivery, visibility timeout handling |