| Component Name | Responsibility | Interfaces (key endpoints or methods) | Depends On (other modules) | Technologies (frameworks, DBs, patterns) |
|---|---|---|---|---|
| Web Frontend (Clients/Web) | Serve SPA UI for catalog, dealers, quotes, orders, deliveries; manage extras/events; call backend APIs | HTTP to OrderService: /catalog, /dealers, /quotes, /orders, /shipments, /shipments/deliveries; Data.* methods: catalogGet/save/delete, dealersGet/save/delete, quotesGet/save/delete, orderCreateFromQuote/get/save/delete, deliveryCreateFromOrder/get/save/delete; serverconfig.js sets base URL | OrderService; Google Maps Places API; DateJS | WinJS SPA, HTML/CSS/JS, Tomcat 7 WAR, AJAX/XHR, CORS |
| OrderService (REST API) | Core MRP domain: CRUD for catalog, dealers, quotes, orders, shipments; health/telemetry | /ping (GET/HEAD); /catalog (GET, GET/{sku}, POST, PUT/{sku}, DELETE/{sku}); /dealers (GET, GET/{name}, POST, PUT/{name}, DELETE/{name}); /quotes (GET?name, GET/{id}, POST, PUT/{id}, DELETE/{id}); /orders (GET?dealer&status, GET/{id}, POST?fromQuote, PUT/{id}, PUT/{id}/status, POST/{id}/events, DELETE/{id}); /shipments (GET[?status], GET/{orderId}, POST, PUT/{orderId}, POST/{orderId}/events, DELETE/{orderId}) | MongoDB (ordering DB); RepositoryFactory/Repositories; Application Insights; SimpleCORSFilter; (optional) PostgreSQL | Java 8, Spring Boot 1.2.x, Spring Web MVC, Spring Data MongoTemplate, Gradle; Patterns: Repository, Filters, Retry (MongoOperationsWithRetry) |
| Persistence Layer (RepositoryFactory + Repositories) | Abstract data access; implement CRUD/domain rules; wire cross-repo deps (Quotes→Dealers, Orders→Quotes, Shipments→Orders) | Repos: CatalogItemsRepository, DealersRepository, QuoteRepository, OrderRepository, ShipmentRepository; Key methods: createQuote/update/remove, createOrder/update/statusUpdate/remove, getOrdersByDealerName/status, createShipment/addEvent/update/remove; RepositoryFactory.reset(storage) | MongoDB (MongoTemplate) or in-memory; Application Insights (Mongo telemetry) | Spring Data MongoDB, Custom retry wrapper (MongoOperationsWithRetry), In-memory mocks; Patterns: Repository, Abstract Factory |
| MongoDB (ordering database) | Persist domain documents and indexes; seeded with sample data | Collections: catalog, dealers, quotes, orders, shipments; Ports: 27017 (DB), 28017 (REST in Docker); Seed scripts: deploy/MongoRecords.js | — (used by OrderService) | MongoDB (Docker), Document schema per models; JSON/BSON storage |
| IntegrationService | Integrate with Website via queues; create Quote→Order→Shipment in OrderService; publish product updates | Scheduled tasks every 30s: CreateOrderProcessTask, UpdateProductProcessTask; QueueService<T>: getQueueMessage/addQueueMessage/deleteQueueMessage; HTTP to OrderService: POST /quotes, POST /orders?fromQuote={quoteId}, POST /shipments, GET /catalog; Config: mrp.endpoint, azure.storage.queue.* | Azure Storage Queues (“orders”, “product”); OrderService | Java 8, Spring Boot (@EnableScheduling), RestTemplate, Azure Storage SDK 2.0.0, Jackson, SLF4J; Patterns: Polling worker, Queue abstraction, DTO mapping |
| Azure Storage Queues | Messaging backbone between Website and MRP; buffer order intake and product updates | Queues: orders (input), product (output); Ops: enqueue, dequeue with visibility timeout (azure.storage.queue.message), delete; Message contracts: OrderMessage, ProductMessage | — (used by IntegrationService and external Website) | Azure Storage Queues |
| Observability/Health | Telemetry and health; track HTTP requests/exceptions and Mongo dependencies; expose build info | AppInsightsFilter (HTTP request/exception telemetry); RemoteDependencyTelemetry for Mongo ops; PingController: GET/HEAD /ping (returns messages + buildinfo) | Application Insights service; OrderService | Application Insights Java SDK, Servlet Filter, Gradle buildinfo task |
| Deployment & Automation | Build/package/deploy services; provision infra; seed DB | Scripts: deploy/deploy_mrp_app.sh; Docker: BuildAndRun.sh, StopAndRemove.sh; Images: db(mongo), order(jar), web(tomcat WAR); ARM templates (ports 22/9080/8080, custom scripts); Chef/Puppet/Ansible recipes | Docker engine; Ubuntu/CentOS VMs; Tomcat; Java 8; MongoDB | Docker, Bash, Azure ARM, Chef, Puppet, Ansible, Travis CI/Jenkins |