| Component Name | Responsibility | Interfaces (key endpoints or methods) | Depends On (other modules) | Technologies (frameworks, DBs, patterns) |
|---|---|---|---|---|
| Web Client (MRP UI) | Static web UI for managing dealers, quotes, orders, deliveries, catalog; packaged as WAR and served by Tomcat | Consumes OrderService REST: /catalog, /dealers, /quotes, /orders, /shipments; JS modules: Data.* (dealerSave, catalogGet, quotesGet, orderSave, deliverySave); Pages under src/Clients/Web/pages/* | OrderService (MRP API) | HTML/CSS/JS, WinJS, Date.js, Google Places API (address lookup), Tomcat 7 WAR |
| OrderService (MRP API) | Core domain API for MRP: catalog, dealers, quotes, orders, shipments; exposes REST; persists to MongoDB | REST endpoints: /ping; /catalog (GET/POST/PUT/DELETE); /dealers (GET/POST/PUT/DELETE); /quotes (GET by id, GET ?name=, POST, PUT, DELETE); /orders (GET ?dealer&status, GET by id, POST ?fromQuote, PUT, PUT /status, POST /events, DELETE); /shipments (GET ?status, GET by id, POST, PUT, POST /events, DELETE) | Repository Layer, MongoDB, Telemetry & Diagnostics | Java 8, Spring Boot, Spring MVC, Spring Data MongoDB, Gradle, REST, Repository pattern |
| IntegrationService (Website/MRP Integration) | Bridges external website queues and MRP API; periodically pulls orders from Azure Queue, creates quotes/orders/shipments in MRP; pushes inventory updates to website queue | Scheduled tasks: CreateOrderProcessTask (reads ‘orders’ queue -> MrpConnectService.createNewOrder); UpdateProductProcessTask (MrpConnectService.getCatalogItems -> QueueService.addQueueMessage to ‘product’); Services: QueueService (getQueueMessage, addQueueMessage, deleteQueueMessage), MrpConnectService (createQuote, createOrder, createShipment, getCatalogItems) | OrderService (MRP API), Azure Storage Queues | Java 8, Spring Boot (scheduling), Azure Storage Queue SDK, Jackson, Gradle, Polling/Scheduler pattern |
| Repository Layer (OrderService) | Abstraction over persistence for domain aggregates; dual implementations (in-memory, MongoDB) | Interfaces: CatalogItemsRepository, DealersRepository, QuoteRepository, OrderRepository, ShipmentRepository (e.g., getCatalogItems, upsertCatalogItem; getDealers, upsertDealer; createQuote/updateQuote; createOrder/updateStatus; createShipment/addEvent) | MongoDB (for Mongo implementations), Domain Models | Spring Data MongoDB (MongoTemplate), In-memory mocks, Repository pattern, Unit/Integration tests |
| MongoDB (Persistence) | Stores domain data for OrderService | Collections: catalog, dealers, quotes, orders, shipments; Seeded by MongoRecords.js | OrderService (Mongo repositories), Data Seeder | MongoDB, BSON documents |
| Telemetry & Diagnostics | Cross-cutting observability for API and DB calls | AppInsightsFilter (request telemetry); MongoOperationsWithRetry (tracks Mongo dependency with retry and telemetry) | OrderService | Microsoft Application Insights (Java SDK), Servlet Filter, Dependency telemetry |
| Data Seeder | Provides sample data for local/dev and Docker | deploy/MongoRecords.js; docker/Database/drop/MongoRecords.js (inserts sample catalog, dealers, quotes, orders, shipments) | MongoDB | Mongo shell script |
| Containerization (Docker Images) | Build and run the system locally in containers | Images and entrypoints: Database (mongo + MongoRecords.js); Order (openjdk:8-jre runs ordering-*.jar); Clients (tomcat:7-jre8 serves mrp.war); Scripts: BuildAndRun.sh, StopAndRemove.sh | Web Client, OrderService, MongoDB, Data Seeder | Docker, Bash scripts, Port mapping (27017, 8080, 80) |
| Provisioning & CI/CD (IaC & Automation) | Provision infra and automate builds/deployments for labs | Azure ARM templates (MRP VM, Jenkins, Chef/Puppet, Ubuntu bases); Azure Stack custom scripts (install updates/jenkins/chef/puppet); SSH deployment scripts; Travis CI config (.travis.yml) | All runtime components (deploy targets) | Azure Resource Manager, Azure Stack, Bash/PowerShell, Jenkins, Chef, Puppet, Travis CI, Infrastructure-as-Code |